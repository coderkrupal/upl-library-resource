<!DOCTYPE html>
<html>
  <head>
    <title>Admin Panel - Library Portal</title>
    <link rel="stylesheet" href="assets/style.css" />
  </head>
  <body>
    <div class="navbar">
      <h2>ðŸ›  Admin Panel</h2>
      <div>
        <span id="userEmail"></span> |
        <button id="logoutBtn" class="btn small">Logout</button>
      </div>
    </div>

    <div class="container">
      <h2>Manage Users</h2>
      <p>Registered users list:</p>

      <div id="usersList" class="list"></div>
    </div>

    <script type="module">
      import { requireLogin } from "./js/app.js";
      requireLogin();
    </script>

    <script type="module">
      import { api } from "./js/api.js";

      const token = localStorage.getItem("token");

      async function loadUsers() {
        const users = await api("/admin/users", "GET", null, token);

        const box = document.getElementById("usersList");
        box.innerHTML = "";

        for (const id in users) {
          const u = users[id];
          box.innerHTML += `
        <div class="item">
          <strong>${u.email}</strong> â€” ${u.role}
        </div>
      `;
        }
      }

      loadUsers();
    </script>

    <script type="module" src="js/app.js"></script>
  </body>
</html>
